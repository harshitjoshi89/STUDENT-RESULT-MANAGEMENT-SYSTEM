<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FA Dashboard</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'sans': ['Inter', 'sans-serif'],
                    },
                },
            },
        }
    </script>
</head>
<body class="bg-gray-100 font-sans">

    <!-- Header -->
    <header class="bg-blue-800 text-white shadow-md">
        <div class="container mx-auto px-6 py-4 flex justify-between items-center">
            <h1 class="text-2xl font-bold">SRMS Faculty Advisor Portal</h1>
            <!-- Logout Form -->
            <form th:action="@{/logout}" method="post">
                <button type="submit" class="bg-red-600 hover:bg-red-700 text-white font-semibold py-2 px-4 rounded-lg shadow transition duration-200">
                    Logout (<span th:text="${teacher.username}"></span>)
                </button>
            </form>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-6 py-8">
        
        <!-- Welcome Message -->
        <h2 class="text-3xl font-bold text-gray-800 mb-6" th:text="'Welcome, ' + ${teacher.name}">Welcome, FA</h2>

        <!-- Grid Layout -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            
            <!-- Card 1: Your Profile (Takes 1/3 width on large screens) -->
            <div class="lg:col-span-1 bg-white p-6 rounded-lg shadow-lg h-fit">
                <h3 class="text-xl font-semibold text-gray-700 mb-4 border-b pb-2">Your Profile</h3>
                <div class="space-y-3 text-gray-800">
                    <p><strong>FA ID:</strong> <span th:text="${teacher.teacherId}"></span></p>
                    <p><strong>Name:</strong> <span th:text="${teacher.name}"></span></p>
                    <p><strong>Email:</strong> <span th:text="${teacher.email}"></span></p>
                    <p><strong>Role:</strong> <span th:text="${teacher.role}"></span></p>
                    <p class="font-bold text-blue-700"><strong>Assigned Class:</strong> <span th:text="${teacher.classAssigned}"></span></p>
                </div>
            </div>

            <!-- Card 2: Assigned Class Students (Takes 2/3 width on large screens) -->
            <div class="lg:col-span-2 bg-white p-6 rounded-lg shadow-lg">
                <h3 class="text-xl font-semibold text-gray-700 mb-4 border-b pb-2">
                    Student Results for Class: <span th:text="${classSection}"></span>
                </h3>
                
                <!-- Student Table -->
                <div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                            <tr>
                                <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Roll No</th>
                                <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Name</th>
                                <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Maths</th>
                                <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Physics</th>
                                <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Chemistry</th>
                                <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Total</th>
                                <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Average</th>
                                <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Result</th>
                            </tr>
                        </thead>
                        <tbody class="bg-white divide-y divide-gray-200">
                            <!-- Loop through students -->
                            <tr th:each="student : ${students}" class="hover:bg-gray-50">
                                <td class="px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900" th:text="${student.rollno}"></td>
                                <td class="px-4 py-3 whitespace-nowrap text-sm text-gray-700" th:text="${student.name}"></td>
                                <td class="px-4 py-3 whitespace-nowrap text-sm text-gray-700" th:text="${student.maths}"></td>
                                <td class="px-4 py-3 whitespace-nowrap text-sm text-gray-700" th:text="${student.physics}"></td>
                                <td class="px-4 py-3 whitespace-nowrap text-sm text-gray-700" th:text="${student.chemistry}"></td>
                                <td class="px-4 py-3 whitespace-nowrap text-sm font-semibold text-gray-900" th:text="${student.total}"></td>
                                <td class="px-4 py-3 whitespace-nowrap text-sm font-semibold text-blue-700" th:text="${#numbers.formatDecimal(student.average, 1, 2)} + '%'"></td>
                                <td class="px-4 py-3 whitespace-nowrap text-sm font-semibold">
                                    <span th:if="${student.result == 'Pass'}" class="text-green-600" th:text="${student.result}"></span>
                                    <span th:if="${student.result == 'Fail'}" class="text-red-600" th:text="${student.result}"></span>
                                    <span th:if="${student.result != 'Pass' and student.result != 'Fail'}" class="text-gray-500" th:text="${student.result}"></span>
                                </td>
                            </tr>
                            
                            <!-- If no students found -->
                            <tr th:if="${students.isEmpty()}">
                                <td colspan="8" class="px-4 py-4 text-center text-sm text-gray-500">
                                    No students found for this class.
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            
        </div>
    </main>

</body>
</html>

